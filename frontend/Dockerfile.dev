FROM node:22.18.0  
WORKDIR /app  


# Instalar Java (OpenJDK 17) necesario para OpenAPI Generator
RUN apt-get update && \
    apt-get install -y openjdk-17-jre && \
    rm -rf /var/lib/apt/lists/*


# copiar package.json para cachear instalaci칩n
COPY package*.json ./  

# instalar dependencias (incluye @angular/cli si est치 en devDependencies)
RUN npm ci  

# copiar el resto del c칩digo
COPY . .  

EXPOSE 4200  

# usar npx para ejecutar la versi칩n local de ng (o la instalada)
CMD ["npx", "ng", "serve", "--host", "0.0.0.0", "--port", "4200", "--poll", "2000"]